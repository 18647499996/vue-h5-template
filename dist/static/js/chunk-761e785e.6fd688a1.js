(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-761e785e"],{"013e":function(t,e,i){t.exports=i.p+"static/img/img1.0dc2d311.png"},2184:function(t,e,i){"use strict";i("a767")},"2ad7":function(t,e,i){t.exports=i.p+"static/img/btn.31da4e89.png"},"5f87":function(t,e,i){"use strict";i.d(e,"g",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"f",(function(){return c})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return d})),i.d(e,"a",(function(){return l}));var n=i("a78e"),r=i.n(n);function a(t){return r.a.set("USER_TOKEN",t)}function s(){return r.a.get("USER_TOKEN")}function o(){return r.a.remove("USER_TOKEN")}function c(){return r.a.set("SKIP_SHOP",1)}function u(){return r.a.set("SKIP_ACTIVE",1)}function d(t){return r.a.set("LOCATION_INFO",t)}function l(){return r.a.get("LOCATION_INFO")}},"8a80":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"luckDraw"},[i("div",{staticClass:"main"},[t._m(0),i("div",{staticClass:"draw"},[t._m(1),i("div",{staticClass:"drawCount"},[t._v("您有"),i("span",[t._v(t._s(t.count))]),t._v("次抽奖机会")]),i("div",{staticClass:"drawPrize"},[i("div",{staticClass:"box"},t._l(1,(function(e,n){return i("div",{key:n,staticClass:"groups animation-ease",on:{webkitTransitionEnd:function(i){return t.endGame(e)}}},t._l(t.round+1,(function(e,n){return i("ul",{key:n,staticClass:"group-item"},t._l(t.prizes,(function(t,e){return i("li",{key:e,staticClass:"prize-item"},[i("van-image",{attrs:{width:"100%",height:"90px",fit:"cover",src:t.imageUrl}})],1)})),0)})),0)})),0)]),i("div",{staticClass:"drawBtn",on:{click:t.startClick}},[i("img",{attrs:{src:t.btnurl}})]),t._m(2)]),i("div",{staticClass:"rule"},[t._m(3),i("div",{staticClass:"context"},[i("div",{staticClass:"title"},[t._v("活动规则")]),i("p",{domProps:{innerHTML:t._s(t.rule)}})]),t._m(4)])]),i("div",{staticClass:"Winning",staticStyle:{right:"0","border-radius":"14px 0 0 14px"},on:{click:function(e){return t.$router.push("/record")}}},[t._v(" 中奖记录 ")]),i("van-dialog",{staticClass:"dialog",attrs:{title:"恭喜获得"},model:{value:t.isSW,callback:function(e){t.isSW=e},expression:"isSW"}},[i("div",{staticClass:"jptitle"},[t._v(t._s(t.title))]),i("img",{attrs:{src:t.imgurl}}),i("p",[t._v("请到小区物业处领取奖品")])]),i("van-dialog",{staticClass:"dialog",attrs:{title:"恭喜获得","show-cancel-button":"","confirm-button-text":"去查看","cancel-button-text":"确认"},on:{confirm:t.goYHJ},model:{value:t.isYHJ,callback:function(e){t.isYHJ=e},expression:"isYHJ"}},[i("img",{attrs:{src:"https://img01.yzcdn.cn/vant/apple-3.jpg"}}),i("p",[t._v("优惠券已放入券包")])]),i("van-dialog",{staticClass:"dialog",attrs:{title:"很遗憾～"},model:{value:t.isNo,callback:function(e){t.isNo=e},expression:"isNo"}},[i("div",{staticClass:"jptitle",staticStyle:{"margin-bottom":"31px"}},[t._v("奖品与你擦肩而过。")])])],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("img",{attrs:{src:i("ca9c")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawImg"},[n("img",{attrs:{src:i("d810")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawRecord"},[i("div",{staticClass:"myscroll"},[i("ul",{attrs:{id:"ul"}},[i("li",[t._v("20210611恭喜168****6189抽到10000元现金")]),i("li",[t._v("20210611恭喜168****6189抽到10000元现金")]),i("li",[t._v("20210611恭喜168****6189抽到10000元现金")])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img1"},[n("img",{attrs:{src:i("013e")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img2"},[n("img",{attrs:{src:i("013e")}})])}],a=i("c24f"),s=i("1157"),o=i.n(s),c={data:function(){return{round:6,prizes:[],disClick:!1,itemHeight:0,btnurl:i("2ad7"),count:0,time:Object,rule:"",isSW:!1,isYHJ:!1,isNo:!1,imgurl:"",title:"",k:!1}},beforeRouteLeave:function(t,e,i){clearInterval(this.time),i()},mounted:function(){},created:function(){this.Bind()},methods:{back:function(){this.$router.go(-1)},rightClick:function(){},goYHJ:function(){},Bind:function(){var t=this;Object(a["b"])({id:this.$route.query.id}).then((function(e){0==e.code?(t.prizes=e.data.prizes,t.count=e.data.luckCount,t.rule=e.data.rule,t.$nextTick((function(){t.itemHeight=o()(".prize-item").outerHeight(),o()(".groups").css("height",t.itemHeight*t.prizes.length*(t.round+1)),o()("#ul").html(o()("#ul").html()+o()("#ul").html()),t.time=setInterval((function(){var t=o()("#ul").css("top"),e=parseInt(t.substring(0,t.indexOf("px")));parseInt(t.substring(1,t.indexOf("px")))>=(o()("#ul li").length-2)*o()("#ul li").height()?o()("#ul").css("top",-1):(e--,o()("#ul").css("top",e))}),300)}))):t.$toast(e.msg)}))},startClick:function(){var t=this;this.disClick||this.count<=0||(this.btnurl=i("a125"),this.count--,Object(a["d"])({id:this.$route.query.id}).then((function(e){if(0==e.code){for(var i,n=0;n<t.prizes.length;n++)e.data.prizeId==t.prizes[n].id&&(i=n,t.imgurl=t.prizes[n].imageUrl,t.title=t.prizes[n].title);t.runGame(i,e.data.isWin)}else t.$toast(e.msg)})))},runGame:function(t,e){this.k=e,this.disClick=!0,this.resetGame();var i=this.itemHeight,n=this.round*o()(".group-item").height();o()(".groups").each((function(e){var r=this,a=t*i+n;setTimeout((function(){o()(r).addClass("animation-ease").css("transform","translate3d(0, -"+a+"px, 0)")}),300*e)}))},endGame:function(t){this.disClick=!1,this.btnurl=i("2ad7"),this.k?this.isSW=!0:this.isNo=!0},resetGame:function(){o()(".groups").removeClass("animation-ease").css("transform","")}}},u=c,d=(i("2184"),i("2877")),l=Object(d["a"])(u,n,r,!1,null,"3f5b9f34",null);e["default"]=l.exports},a125:function(t,e,i){t.exports=i.p+"static/img/btnh.4d50c24f.png"},a767:function(t,e,i){},b775:function(t,e,i){"use strict";i("e7e5");var n=i("d399"),r=(i("d3b7"),i("25f0"),i("bc3a")),a=i.n(r),s=i("4360"),o=i("a18c"),c=i("5c96"),u=i("5f87"),d=i("f121"),l=a.a.create({baseURL:d["baseApi"],withCredentials:!0,timeout:3e4});l.interceptors.request.use((function(t){return t.hideloading||n["a"].loading({message:"加载中..",forbidClick:!0,duration:0}),s["a"].getters.token&&(t.headers["X-Token"]=""),""!==Object(u["b"])()&&(t.headers["Authorization"]="Bearer "+Object(u["b"])()),t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){n["a"].clear();var e=t.data,i=t.request;if(200===i.status)return 0===e.code?Promise.resolve(e):Promise.reject(e.msg);c["Message"].error({message:"服务器连接异常，请稍后连接！",duration:1e3})}),(function(t){n["a"].clear();var e=0;try{e=t.response.data.code}catch(r){if(-1!==t.toString().indexOf("Error: timeout"))return c["Message"].error({message:"网络请求超时",duration:2e3}),Promise.reject(t)}if(e)if(401===e)c["Message"].error({message:"登录状态已过期，重新登录！",duration:1500}),"/api/Mall/GetMall?"===t.response.config.url&&Object(u["f"])(),"api/Activity/GetActivity?"===t.response.config.url&&Object(u["d"])(),Object(u["c"])(),o["a"].push("/verify_login");else{var i=t.response.data.message;void 0!==i&&c["Message"].error({message:i,duration:2e3})}else c["Message"].error({message:"接口请求失败",duration:2e3});return Promise.reject(t)})),e["a"]=l},c24f:function(t,e,i){"use strict";i.d(e,"o",(function(){return r})),i.d(e,"g",(function(){return a})),i.d(e,"j",(function(){return s})),i.d(e,"n",(function(){return o})),i.d(e,"h",(function(){return c})),i.d(e,"l",(function(){return u})),i.d(e,"k",(function(){return d})),i.d(e,"i",(function(){return l})),i.d(e,"m",(function(){return f})),i.d(e,"f",(function(){return m})),i.d(e,"e",(function(){return g})),i.d(e,"a",(function(){return p})),i.d(e,"b",(function(){return h})),i.d(e,"d",(function(){return v})),i.d(e,"c",(function(){return b}));var n=i("b775");function r(t){return Object(n["a"])({url:"api/Token?",method:"post",data:t,hideloading:!1})}function a(t){return Object(n["a"])({url:"api/Bill/GetBillInfos?",method:"get",params:t,hideloading:!1})}function s(t){return Object(n["a"])({url:"api/Item/GetItems?",method:"get",params:t,hideloading:!0})}function o(t){return Object(n["a"])({url:"api/Item/GetZoneOrBuild?",method:"get",params:t,hideloading:!1})}function c(t){return Object(n["a"])({url:"api/Item/GetBuild?",method:"get",params:t,hideloading:!1})}function u(t){return Object(n["a"])({url:"api/Item/GetUnit?",method:"get",params:t,hideloading:!1})}function d(t){return Object(n["a"])({url:"api/Item/GetRoom?",method:"get",params:t,hideloading:!1})}function l(t){return Object(n["a"])({url:"api/Item/GetHownerMessage?",method:"get",params:t,hideloading:!1})}function f(t){return Object(n["a"])({url:"api/Sms?",method:"get",params:t,hideloading:!1})}function m(t){return Object(n["a"])({url:"api/Item/BindRoom?",method:"get",params:t,hideloading:!1})}function g(t){return Object(n["a"])({url:"/api/Repair/AddRepair",method:"post",data:t,hideloading:!1})}function p(t){return Object(n["a"])({url:"api/Activity/GetActivity?",method:"get",params:t,hideloading:!0})}function h(t){return Object(n["a"])({url:"api/Activity/GetPrize?",method:"get",params:t,hideloading:!1})}function v(t){return Object(n["a"])({url:"api/Activity/LuckPrize?",method:"get",params:t,hideloading:!1})}function b(t){return Object(n["a"])({url:"api/Activity/GetPrizeRecord?",method:"get",params:t,hideloading:!1})}},ca9c:function(t,e,i){t.exports=i.p+"static/img/title.d99eb6d9.png"},d810:function(t,e,i){t.exports=i.p+"static/img/cj.b99a8f8f.png"}}]);