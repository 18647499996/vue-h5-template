(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-759be26d"],{"54ea":function(e,t,n){"use strict";n("d793")},"5f87":function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d}));var i=n("a78e"),o=n.n(i);function a(e){return o.a.set("USER_TOKEN",e)}function r(){return o.a.get("USER_TOKEN")}function c(){return o.a.remove("USER_TOKEN")}function s(){return o.a.set("SKIP_SHOP",1)}function u(){return o.a.set("SKIP_ACTIVE",1)}function l(e){return o.a.set("LOCATION_INFO",e)}function d(){return o.a.get("LOCATION_INFO")}},"79a0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("van-row",{staticClass:"app-shadow"},[n("van-cell",{attrs:{value:"小区信息",icon:"https://image.lawxp.com/webimg.aspx?ImgId=104204"}}),n("van-cell",{attrs:{title:"名称",value:e.name}}),n("van-cell",{attrs:{title:"片区","is-link":"",value:void 0===e.area.text?"请选择":e.area.text},on:{click:function(t){return e.onClickSelect(0)}}}),n("van-cell",{attrs:{title:"楼号","is-link":"",value:void 0===e.building.text?"请选择":e.building.text},on:{click:function(t){return e.onClickSelect(1)}}}),n("van-cell",{attrs:{title:"单元","is-link":"",value:void 0===e.cell.text?"请选择":e.cell.text},on:{click:function(t){return e.onClickSelect(2)}}}),n("van-cell",{attrs:{title:"房号","is-link":"",value:void 0===e.room.text?"请选择":e.room.text},on:{click:function(t){return e.onClickSelect(3)}}})],1),n("van-row",{staticClass:"app-shadow"},[n("van-cell",{attrs:{value:"业主信息",icon:"https://image.lawxp.com/webimg.aspx?ImgId=104205"}}),n("van-cell",{attrs:{title:"业主身份"},scopedSlots:e._u([{key:"default",fn:function(){return e._l(e.roomName,(function(t,i){return n("van-col",{key:i,staticClass:"col-checkbox"},[n("van-checkbox",{attrs:{"checked-color":"#E71120"},on:{click:function(n){return e.onCheckboxClick(t,1)}},model:{value:t.checkout,callback:function(n){e.$set(t,"checkout",n)},expression:"item.checkout"}},[e._v(e._s(t.value)+" ")])],1)}))},proxy:!0}])}),n("van-cell",{attrs:{title:"手机号码"},scopedSlots:e._u([{key:"default",fn:function(){return e._l(e.roomPhone,(function(t,i){return n("van-col",{key:i,staticClass:"col-checkbox"},[n("van-checkbox",{attrs:{"checked-color":"#E71120"},on:{click:function(n){return e.onCheckboxClick(t,2)}},model:{value:t.checkout,callback:function(n){e.$set(t,"checkout",n)},expression:"item.checkout"}},[e._v(e._s(t.value)+" ")])],1)}))},proxy:!0}])})],1),n("van-row",{staticStyle:{"text-align":"center"}},[n("van-button",{staticClass:"btn-verify",attrs:{round:"",color:"#E71120"},on:{click:e.onClickVerify}},[e._v("验证身份")])],1),n("van-popup",{style:{height:"35%"},attrs:{round:"",position:"bottom"},model:{value:e.isPopupShow,callback:function(t){e.isPopupShow=t},expression:"isPopupShow"}},[n("van-picker",{attrs:{title:"标题","show-toolbar":"",columns:e.areaArray,loading:e.loadingStatus},on:{confirm:e.onConfirm,cancel:e.onCancel,change:e.onChange},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{staticClass:"span-title"},[e._v(e._s(0===e.selectType?"片区":1===e.selectType?"楼号":2===e.selectType?"单元":"房号"))])]},proxy:!0}])})],1),n("van-dialog",{attrs:{title:"验证身份信息","show-cancel-button":""},on:{confirm:e.onClickConfirm},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t},expression:"isDialogShow"}},[n("van-row",{staticClass:"row-verify-phone"},[n("span",[e._v(e._s(void 0===e.roomObject.phone?"":e.roomObject.phone.value))])]),n("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"info",round:""},on:{click:e.onClickSendVerify}},[e._v(e._s(e.hint))])]},proxy:!0}]),model:{value:e.inputSms,callback:function(t){e.inputSms=t},expression:"inputSms"}})],1)],1)},o=[],a=(n("9a83"),n("f564")),r=(n("b0c0"),n("ac1f"),n("5319"),n("7b31")),c={name:"NewAddHouse",data:function(){return{id:"",name:"",area:{},building:{},cell:{},room:{},isPopupShow:!1,loadingStatus:!0,isDialogShow:!1,selectType:0,areaArray:[],roomName:[],roomPhone:[],roomObject:{},hint:"发送验证码",totalTime:60,inputSms:""}},created:function(){this.id=this.$route.query.id,this.name=this.$route.query.name},mounted:function(){},methods:{getSubArea:function(e,t){var n=this;Object(r["k"])({id:e,level:t}).then((function(e){n.loadingStatus=!1,n.areaArray=e.data})).catch((function(e){n.loadingStatus=!1,Object(a["a"])({type:"danger",message:e})}))},getOwnerByRoom:function(e){var t=this;Object(r["f"])({roomId:e}).then((function(e){t.roomName=e.data.names,t.roomPhone=e.data.phones})).catch((function(e){Object(a["a"])({type:"danger",message:e})}))},onClickSelect:function(e){switch(this.loadingStatus=!0,this.selectType=e,e){case 0:this.getSubArea(this.id,0);break;case 1:if(void 0===this.area.text)return void Object(a["a"])({type:"warning",message:"请选择片区"});this.getSubArea(this.area.id,this.area.level);break;case 2:if(void 0===this.building.text)return void Object(a["a"])({type:"warning",message:"请选择楼号"});this.getSubArea(this.building.id,this.building.level);break;case 3:if(void 0===this.cell.text)return void Object(a["a"])({type:"warning",message:"请选择单元"});this.getSubArea(this.cell.id,this.cell.level);break}this.isPopupShow=!0},onCancel:function(){this.isPopupShow=!1},onChange:function(e,t){switch(this.selectType){case 0:this.building={},this.cell={},this.room={};break;case 1:this.cell={},this.room={};break;case 2:this.room={};break;case 3:break}},onConfirm:function(e){if(void 0!==e)switch(this.isPopupShow=!1,this.selectType){case 0:this.area=e;break;case 1:this.building=e;break;case 2:this.cell=e;break;case 3:this.room=e,this.getOwnerByRoom(e.id);break}else Object(a["a"])({type:"danger",message:"未获取到小区信息"})},onCheckboxClick:function(e,t){if(1===t)for(var n=0;n<this.roomName.length;n++){var i=this.roomName[n];i.checkout=e.id===i.id,i.checkout&&(this.roomObject.name=i)}else for(var o=0;o<this.roomPhone.length;o++){var a=this.roomPhone[o];a.checkout=e.id===a.id,a.checkout&&(this.roomObject.phone=a)}},onClickVerify:function(){void 0!==this.roomObject.name?void 0!==this.roomObject.phone?this.isDialogShow=!0:Object(a["a"])({type:"warning",message:"请选择业主手机号码"}):Object(a["a"])({type:"warning",message:"请选择业主"})},onClickSendVerify:function(){var e=this;Object(r["g"])({phoneIndex:this.roomObject.phone.index,roomId:this.room.id}).then((function(t){if(Object(a["a"])({type:"warning",message:"验证码已发送到您手机，60秒后将过期"}),60===e.totalTime)var n=setInterval((function(){0===e.totalTime?(clearInterval(n),e.totalTime=60,e.hint="发送验证码"):(e.totalTime--,e.hint=e.totalTime+"s重新获取")}),1e3)})).catch((function(e){Object(a["a"])({type:"danger",message:e})}))},onClickConfirm:function(){var e=this;""!==this.inputSms?(this.$router.replace("/Home"),Object(r["b"])({nameIndex:this.roomObject.name.index,phoneIndex:this.roomObject.phone.index,code:this.inputSms}).then((function(t){Object(a["a"])({type:"success",message:"绑定成功"});var n=setInterval((function(){clearInterval(n),e.$router.replace("/Home")}),2e3)})).catch((function(e){Object(a["a"])({type:"danger",message:e})}))):Object(a["a"])({type:"warning",message:"请输入验证码"})}}},s=c,u=(n("54ea"),n("2877")),l=Object(u["a"])(s,i,o,!1,null,"31e70ccc",null);t["default"]=l.exports},"7b31":function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"k",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"l",(function(){return g}));var i=n("b775");function o(e){return Object(i["a"])({url:"/api/Item/GetRangeItem?",method:"get",params:e,hideloading:!0})}function a(e){return Object(i["a"])({url:"/api/Item/GetAllItemByName?",method:"get",params:e,hideloading:!0})}function r(e){return Object(i["a"])({url:"/api/Item/GetSubArea?",method:"get",params:e,hideloading:!0})}function c(e){return Object(i["a"])({url:"/api/Item/GetOwnerByRoom?",method:"get",params:e,hideloading:!1})}function s(e){return Object(i["a"])({url:"/api/Sms/OwnerCode?",method:"get",params:e,hideloading:!1})}function u(e){return Object(i["a"])({url:"/api/Item/BindUserOwner?",method:"get",params:e,hideloading:!1})}function l(e){return Object(i["a"])({url:"/api/Item/GetUserRoom?",method:"get",params:e,hideloading:!1})}function d(e){return Object(i["a"])({url:"/api/Repair/Add",method:"post",data:e,hideloading:!1})}function h(e){return Object(i["a"])({url:"/api/Repair/getRepair",method:"get",params:e,hideloading:!1})}function m(e){return Object(i["a"])({url:"/api/Repair/GetRepairDetail",method:"get",params:e,hideloading:!1})}function f(e){return Object(i["a"])({url:"/api/Repair/Cancel",method:"post",data:e,hideloading:!1})}function p(e){return Object(i["a"])({url:"/api/Repair/AddEvaluation?",method:"post",data:e,hideloading:!1})}function g(e){return Object(i["a"])({url:"/api/Item/GetUserItem?",method:"get",params:e,hideloading:!1})}},b775:function(e,t,n){"use strict";n("e7e5");var i=n("d399"),o=(n("d3b7"),n("25f0"),n("bc3a")),a=n.n(o),r=n("4360"),c=n("a18c"),s=n("5c96"),u=n("5f87"),l=n("f121"),d=a.a.create({baseURL:l["baseApi"],withCredentials:!0,timeout:3e4});d.interceptors.request.use((function(e){return e.hideloading||i["a"].loading({message:"加载中..",forbidClick:!0,duration:0}),r["a"].getters.token&&(e.headers["X-Token"]=""),""!==Object(u["b"])()&&(e.headers["Authorization"]="Bearer "+Object(u["b"])()),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){i["a"].clear();var t=e.data,n=e.request;if(200===n.status)return 0===t.code?Promise.resolve(t):Promise.reject(t.msg);s["Message"].error({message:"服务器连接异常，请稍后连接！",duration:1e3})}),(function(e){i["a"].clear();var t=0;try{t=e.response.data.code}catch(o){if(-1!==e.toString().indexOf("Error: timeout"))return s["Message"].error({message:"网络请求超时",duration:2e3}),Promise.reject(e)}if(t)if(401===t)s["Message"].error({message:"登录状态已过期，重新登录！",duration:1500}),"/api/Mall/GetMall?"===e.response.config.url&&Object(u["f"])(),"api/Activity/GetActivity?"===e.response.config.url&&Object(u["d"])(),Object(u["c"])(),c["a"].push("/verify_login");else{var n=e.response.data.message;void 0!==n&&s["Message"].error({message:n,duration:2e3})}else s["Message"].error({message:"接口请求失败",duration:2e3});return Promise.reject(e)})),t["a"]=d},d793:function(e,t,n){}}]);