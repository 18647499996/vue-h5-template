(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7578da08"],{"3ac5":function(t,e,r){},"5f87":function(t,e,r){"use strict";r.d(e,"g",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return o})),r.d(e,"f",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"a",(function(){return p}));var a=r("a78e"),n=r.n(a);function i(t){return n.a.set("USER_TOKEN",t)}function c(){return n.a.get("USER_TOKEN")}function o(){return n.a.remove("USER_TOKEN")}function s(){return n.a.set("SKIP_SHOP",1)}function u(){return n.a.set("SKIP_ACTIVE",1)}function d(t){return n.a.set("LOCATION_INFO",t)}function p(){return n.a.get("LOCATION_INFO")}},7915:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-row",[r("van-row",{staticClass:"app-shadow row-title-padding"},[r("van-row",{staticClass:"app-shadow row-title-margin"},[r("van-cell",{attrs:{title:0===t.repairObject.type?"其他":1===t.repairObject.type?"房屋维修":2===t.repairObject.type?"水电燃气":"公共设备",icon:0===t.repairObject.type||1===t.repairObject.type?"https://image.lawxp.com/webimg.aspx?ImgId=104217":2===t.repairObject.type?"https://image.lawxp.com/webimg.aspx?ImgId=104218":"https://image.lawxp.com/webimg.aspx?ImgId=104219"}})],1),r("van-row",{staticClass:"row-description"},[t._v(t._s(t.repairObject.describe))]),r("van-row",{staticClass:"row-cover"},t._l(t.repairObject.imgs,(function(e,a){return r("van-col",{key:a,staticClass:"col-cover",on:{click:function(e){return t.onItemClickCover(a)}}},[r("el-image",{staticClass:"image-cover",attrs:{src:e,fit:"cover"}})],1)})),1),r("van-row",{staticClass:"row-divider"}),r("van-row",{staticClass:"row-date"},[r("van-icon",{staticStyle:{float:"left"},attrs:{name:"underway-o",size:"20"}}),r("span",{staticClass:"span-date"},[t._v(t._s(t.repairObject.date))])],1)],1),r("van-row",{staticClass:"app-shadow"},[r("span",{staticClass:"span-progress"},[t._v("进度状况")]),r("van-steps",{attrs:{direction:"vertical",active:t.active,"active-color":"#38f"}},t._l(t.repairObject.records,(function(e,a){return r("van-step",{key:a},[r("h4",[t._v(t._s(e.text))]),r("p",[t._v(t._s(e.date))])])})),1)],1),null!==t.repairObject.staff?r("van-row",{staticClass:"row-property"},[r("van-row",[t._v("已转发责任人："+t._s(t.repairObject.staff))]),r("van-row",{staticClass:"span-property-phone"},[t._v("联系电话："+t._s(t.repairObject.staffPhone))])],1):t._e(),r("van-row",{staticClass:"row-submit"},[r("van-col",{attrs:{span:12}},[r("van-button",{staticClass:"btn-cancel",on:{click:t.onClickCancel}},[t._v("取消报修")])],1),r("van-col",{attrs:{span:12}},[r("van-button",{staticClass:"btn-submit",on:{click:t.onClickSubmit}},[t._v("完成报修")])],1)],1)],1)},n=[],i=(r("9a83"),r("f564")),c=(r("e17f"),r("2241")),o=(r("4662"),r("28a2")),s=r("7b31"),u={name:"PropertyRepairsDetailsActivity",data:function(){return{active:0,routeParam:{},repairObject:{}}},mounted:function(){this.routeParam=this.$route.query,this.getRepairDetails()},methods:{getRepairDetails:function(){var t=this;Object(s["i"])({id:this.routeParam.id}).then((function(e){t.repairObject=e.data,t.active=e.data.records.length-1})).catch((function(t){}))},onItemClickCover:function(t){Object(o["a"])({images:this.repairObject.imgs,startPosition:t})},onClickCancel:function(){var t=this;c["a"].confirm({title:"是否取消报修？"}).then((function(){Object(s["c"])({id:t.repairObject.id}).then((function(e){Object(i["a"])({type:"success",message:"取消报修成功"}),t.$router.go(-1)})).catch((function(t){Object(i["a"])({type:"danger",message:t})}))})).catch((function(){}))},onClickSubmit:function(){var t=this;Object(s["d"])({id:this.repairObject.id,star:0,evaluation:""}).then((function(e){Object(i["a"])({type:"success",message:"完成报修"}),t.$router.go(-1)})).catch((function(t){Object(i["a"])({type:"danger",message:t})}))}}},d=u,p=(r("be27"),r("2877")),l=Object(p["a"])(d,a,n,!1,null,"48597c1c",null);e["default"]=l.exports},"7b31":function(t,e,r){"use strict";r.d(e,"h",(function(){return n})),r.d(e,"e",(function(){return i})),r.d(e,"k",(function(){return c})),r.d(e,"f",(function(){return o})),r.d(e,"g",(function(){return s})),r.d(e,"b",(function(){return u})),r.d(e,"m",(function(){return d})),r.d(e,"a",(function(){return p})),r.d(e,"j",(function(){return l})),r.d(e,"i",(function(){return f})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return g})),r.d(e,"l",(function(){return b}));var a=r("b775");function n(t){return Object(a["a"])({url:"/api/Item/GetRangeItem?",method:"get",params:t,hideloading:!0})}function i(t){return Object(a["a"])({url:"/api/Item/GetAllItemByName?",method:"get",params:t,hideloading:!0})}function c(t){return Object(a["a"])({url:"/api/Item/GetSubArea?",method:"get",params:t,hideloading:!0})}function o(t){return Object(a["a"])({url:"/api/Item/GetOwnerByRoom?",method:"get",params:t,hideloading:!1})}function s(t){return Object(a["a"])({url:"/api/Sms/OwnerCode?",method:"get",params:t,hideloading:!1})}function u(t){return Object(a["a"])({url:"/api/Item/BindUserOwner?",method:"get",params:t,hideloading:!1})}function d(t){return Object(a["a"])({url:"/api/Item/GetUserRoom?",method:"get",params:t,hideloading:!1})}function p(t){return Object(a["a"])({url:"/api/Repair/Add",method:"post",data:t,hideloading:!1})}function l(t){return Object(a["a"])({url:"/api/Repair/getRepair",method:"get",params:t,hideloading:!1})}function f(t){return Object(a["a"])({url:"/api/Repair/GetRepairDetail",method:"get",params:t,hideloading:!1})}function m(t){return Object(a["a"])({url:"/api/Repair/Cancel",method:"post",data:t,hideloading:!1})}function g(t){return Object(a["a"])({url:"/api/Repair/AddEvaluation?",method:"post",data:t,hideloading:!1})}function b(t){return Object(a["a"])({url:"/api/Item/GetUserItem?",method:"get",params:t,hideloading:!1})}},b775:function(t,e,r){"use strict";r("e7e5");var a=r("d399"),n=(r("d3b7"),r("25f0"),r("bc3a")),i=r.n(n),c=r("4360"),o=r("a18c"),s=r("5c96"),u=r("5f87"),d=r("f121"),p=i.a.create({baseURL:d["baseApi"],withCredentials:!0,timeout:3e4});p.interceptors.request.use((function(t){return t.hideloading||a["a"].loading({message:"加载中..",forbidClick:!0,duration:0}),c["a"].getters.token&&(t.headers["X-Token"]=""),""!==Object(u["b"])()&&(t.headers["Authorization"]="Bearer "+Object(u["b"])()),t}),(function(t){return Promise.reject(t)})),p.interceptors.response.use((function(t){a["a"].clear();var e=t.data,r=t.request;if(200===r.status)return 0===e.code?Promise.resolve(e):Promise.reject(e.msg);s["Message"].error({message:"服务器连接异常，请稍后连接！",duration:1e3})}),(function(t){a["a"].clear();var e=0;try{e=t.response.data.code}catch(n){if(-1!==t.toString().indexOf("Error: timeout"))return s["Message"].error({message:"网络请求超时",duration:2e3}),Promise.reject(t)}if(e)if(401===e)s["Message"].error({message:"登录状态已过期，重新登录！",duration:1500}),"/api/Mall/GetMall?"===t.response.config.url&&Object(u["f"])(),"api/Activity/GetActivity?"===t.response.config.url&&Object(u["d"])(),Object(u["c"])(),o["a"].push("/verify_login");else{var r=t.response.data.message;void 0!==r&&s["Message"].error({message:r,duration:2e3})}else s["Message"].error({message:"接口请求失败",duration:2e3});return Promise.reject(t)})),e["a"]=p},be27:function(t,e,r){"use strict";r("3ac5")}}]);